
<div class="container-fluid">
    <mat-card class="material mt-4">
        <mat-card-header >
            <mat-card-title class="text-center p-2">
                <strong >
                    QUẢN LÝ LOG HỆ THỐNG
                </strong>
                <button mat-raised-button color="primary" matTooltip="Trở về danh sách"
                    class="float-right set-bg-color-primary" (click)="Back()">
                    <mat-icon>keyboard_backspace</mat-icon> &nbsp;Trở về
                </button>
            </mat-card-title>
            <mat-card-subtitle></mat-card-subtitle>
        </mat-card-header>
        <hr>
        <mat-card-content>
            <div class="layout" #TABLE>
                <table mat-table [dataSource]="filteredDataSource" class="table-layout" style="width: 125%;">
                    <ng-container matColumnDef="select">
                        <th mat-header-cell *matHeaderCellDef disableClear >
                            <mat-checkbox (change)="$event ? masterToggle() : null" class="float-left"
                                [checked]="selection.hasValue() && isAllSelected()"
                                [indeterminate]="selection.hasValue() && !isAllSelected()"
                                [aria-label]="checkboxLabel()"> 
                            </mat-checkbox>
                        </th>
                        <td mat-cell *matCellDef="let element">
                            <mat-checkbox (click)="$event.stopPropagation()"
                                (change)="$event ? selection.toggle(element) : null" [checked]="selection.isSelected(element)"
                                [aria-label]="checkboxLabel(element)">
                            </mat-checkbox>
                        </td>
                    </ng-container>
                    
                    <ng-container matColumnDef="index">
                        <th mat-header-cell *matHeaderCellDef> STT </th>
                        <td mat-cell *matCellDef="let element; let i = index;" class="center-cell">
                            {{ index }}
                            <!-- {{this.filteredDataSource.paginator.pageIndex == 0 ? i
                            + 1 : 1 + i + this.filteredDataSource.paginator.pageIndex * this.filteredDataSource.paginator.pageSize}}  -->
                        </td>                        
                    </ng-container>
    
                    <div *ngFor="let field of displayedFields | keyvalue">
                        <ng-container matColumnDef="{{field.key}}" [sticky]="field.key == 'ten_doanh_nghiep' ? true : null">
                            <th mat-header-cell *matHeaderCellDef> {{field.value}} </th>
                            <ng-container *ngIf="field.key != 'tinh_trang_hoat_dong';else activeFieldCond">
                                <ng-container *ngIf="!['san_luong', 'cong_suat', 'so_lao_dong'].includes(field.key);else qtyFieldCond">
                                    <ng-container *ngIf="!['time'].includes(field.key) ;else dateFieldCond">
                                        <td mat-cell *matCellDef="let element"> {{element[field.key]}}</td>
                                    </ng-container>
                                </ng-container>
                            </ng-container>
    
                            <ng-template #activeFieldCond>
                                <td mat-cell *matCellDef="let element"> {{element[field.key] == 1? 'Hoạt động' : 'Hết hạn'}}</td>
                            </ng-template>
    
                            <ng-template #qtyFieldCond>
                                <td mat-cell *matCellDef="let element"> {{element[field.key] | number:'1.0-4'}}</td>
                            </ng-template>
    
                            <ng-template #dateFieldCond>
                                <td mat-cell *matCellDef="let element"> {{element[field.key] | date:'dd/MM/yyyy HH:mm:ss'}}</td>
                            </ng-template>
    
                        </ng-container>
                    </div>
    
                    <tr mat-header-row class="table-header" *matHeaderRowDef="displayedColumns; sticky : true">
                    </tr>
                    <tr mat-row class="table-row" *matRowDef="let row; columns: displayedColumns;let i = index; ">
                </table>
            </div>
        </mat-card-content>
    </mat-card>
</div>

